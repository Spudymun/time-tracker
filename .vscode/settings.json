{
  // ─── INLINE SUGGESTIONS ──────────────────────────────────────────────────
  "github.copilot.enable": {
    "*": true,
    "markdown": true,
    "yaml": true,
    "plaintext": false,
    "scminput": false
  },
  "github.copilot.nextEditSuggestions.enabled": true,
  "github.copilot.nextEditSuggestions.fixes": true,
  "editor.inlineSuggest.minShowDelay": 200,

  // ─── CUSTOM INSTRUCTIONS ─────────────────────────────────────────────────
  // Автоматически подгружает .github/copilot-instructions.md в каждый запрос
  "github.copilot.chat.codeGeneration.useInstructionFiles": true,
  // Подгружает .github/instructions/*.instructions.md по applyTo
  "chat.instructionsFilesLocations": {
    ".github/instructions": true
  },
  "chat.includeReferencedInstructions": true,
  "chat.includeApplyingInstructions": true,

  // ─── AGENT MODE ───────────────────────────────────────────────────────────
  "chat.agent.enabled": true,
  "chat.agent.maxRequests": 75,
  "github.copilot.chat.agent.autoFix": true,

  // ─── MCP ──────────────────────────────────────────────────────────────────
  // Разрешить все MCP серверы из mcp.json
  "chat.mcp.access": "all",
  // Автозапуск MCP серверов при открытии VS Code — отключён для производительности
  // ВАЖНО: project-context требует `npm run mcp:build` перед первым запуском
  "chat.mcp.autoStart": "off",

  // ─── AGENTS, SKILLS, PROMPTS ──────────────────────────────────────────────
  "chat.useAgentSkills": true,
  "chat.agentSkillsLocations": {
    ".github/skills": true
  },
  "chat.agentFilesLocations": {
    ".github/agents": true
  },
  "chat.promptFilesLocations": {
    ".github/prompts": true
  },

  // ─── CONTEXT ─────────────────────────────────────────────────────────────
  "github.copilot.chat.codesearch.enabled": true,
  "github.copilot.chat.editor.temporalContext.enabled": true,

  // ─── БЕЗОПАСНОСТЬ ТЕРМИНАЛА ───────────────────────────────────────────────
  // Агент спрашивает подтверждение перед запуском команд в терминале
  "chat.tools.global.autoApprove": false,
  // Исключения — безопасные команды для авто-одобрения
  "chat.tools.terminal.autoApprove": {
    "npm run": true,
    "npx vitest": true,
    "git status": true,
    "git diff": true,
    "git log": true
  },

  // ─── CHAT UI ──────────────────────────────────────────────────────────────
  "chat.checkpoints.enabled": true,
  "chat.editing.autoAcceptDelay": 0,
  "github.copilot.chat.reviewSelection.enabled": true,
  "chat.editor.wordWrap": "on",

  // ─── COMMIT / PR ──────────────────────────────────────────────────────────
  "github.copilot.chat.commitMessageGeneration.instructions": [
    {
      "text": "Use Conventional Commits format: type(scope): description. Types: feat, fix, docs, style, refactor, test, chore. Example: feat(timer): add stop endpoint"
    }
  ],

  // ─── TYPESCRIPT ───────────────────────────────────────────────────────────
  "typescript.preferences.importModuleSpecifier": "non-relative",
  "typescript.tsdk": "node_modules/typescript/lib",

  // ─── EDITOR ───────────────────────────────────────────────────────────────
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "[typescript]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[typescriptreact]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": "explicit"
  },

  // ─── PERFORMANCE ──────────────────────────────────────────────────────────
  "files.watcherExclude": {
    "**/.git/objects/**": true,
    "**/.git/subtree-cache/**": true,
    "**/node_modules/**": true,
    "**/.next/**": true,
    "**/dist/**": true,
    "**/mcp/dist/**": true,
    "**/prisma/generated/**": true,
    "**/.turbo/**": true
  },
  "files.exclude": {
    "**/.git": true,
    "**/node_modules": true,
    "**/.next": true,
    "**/mcp/dist": true
  },
  "search.exclude": {
    "**/node_modules": true,
    "**/dist": true,
    "**/.next": true,
    "**/.git": true,
    "**/prisma/generated": true,
    "**/mcp/dist": true
  },
  // Ограничить память TS Language Server (по умолчанию неограниченно)
  "typescript.tsserver.maxTsServerMemory": 2048,
  // Не восстанавливать терминалы при перезапуске VS Code (причина 16 терминалов!)
  "terminal.integrated.persistentSessionReviveProcess": "never",
  // Не восстанавливать вкладки при перезапуске (опционально)
  // "workbench.editor.restoreViewState": false,
  "editor.bracketPairColorization.enabled": true,
  "editor.guides.bracketPairs": "active"
}
